import React, { useState } from 'react';\nimport { useNavigate, Link, useLocation, useSearchParams } from 'react-router-dom';\nimport { \n  Calendar, \n  Users, \n  BookOpen, \n  ClipboardList, \n  BarChart3, \n  Brain, \n  FileText, \n  Plus, \n  Edit, \n  Eye, \n  X, \n  Check,\n  AlertCircle,\n  Send,\n  Download,\n  Save\n} from 'lucide-react';\n\n// Importar componentes do arquivo principal\nimport { DashboardLayout } from './App';\n\n// Sidebar do Professor\nconst TeacherSidebar = () => {\n  const location = useLocation();\n  \n  const menuItems = [\n    { path: '/professor/dashboard', icon: Calendar, label: 'Dashboard' },\n    { path: '/professor/turmas', icon: Users, label: 'Turmas' },\n    { path: '/professor/aulas', icon: BookOpen, label: 'Aulas' },\n    { path: '/professor/chamada', icon: ClipboardList, label: 'Chamada' },\n    { path: '/professor/notas', icon: BarChart3, label: 'Notas' },\n    { path: '/professor/assistente', icon: Brain, label: 'Assistente IA' },\n    { path: '/professor/provas', icon: FileText, label: 'Provas' }\n  ];\n\n  return (\n    <aside className=\"w-64 bg-white shadow-sm min-h-screen\">\n      <nav className=\"p-4 space-y-2\">\n        {menuItems.map((item) => (\n          <Link\n            key={item.path}\n            to={item.path}\n            className={`flex items-center space-x-3 px-3 py-2 rounded-lg ${\n              location.pathname === item.path\n                ? 'bg-blue-600 text-white'\n                : 'text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            <item.icon className=\"h-5 w-5\" />\n            <span>{item.label}</span>\n          </Link>\n        ))}\n      </nav>\n    </aside>\n  );\n};\n\n// Página de Chamada\nconst TeacherAttendancePage = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const turma = searchParams.get('turma') || '1';\n  \n  const [students] = useState([\n    { id: 1, name: 'Ana Clara Silva', registration: '2024001', present: true },\n    { id: 2, name: 'Bruno Santos', registration: '2024002', present: true },\n    { id: 3, name: 'Carla Oliveira', registration: '2024003', present: false },\n    { id: 4, name: 'Diego Costa', registration: '2024004', present: true },\n    { id: 5, name: 'Elena Rodrigues', registration: '2024005', present: true },\n    { id: 6, name: 'Felipe Lima', registration: '2024006', present: false },\n    { id: 7, name: 'Gabriela Souza', registration: '2024007', present: true },\n    { id: 8, name: 'Henrique Alves', registration: '2024008', present: true }\n  ]);\n\n  const [attendance, setAttendance] = useState(\n    students.reduce((acc, student) => {\n      acc[student.id] = student.present;\n      return acc;\n    }, {} as Record<number, boolean>)\n  );\n\n  const toggleAttendance = (studentId: number) => {\n    setAttendance(prev => ({\n      ...prev,\n      [studentId]: !prev[studentId]\n    }));\n  };\n\n  const handleSaveAttendance = () => {\n    const presentCount = Object.values(attendance).filter(Boolean).length;\n    alert(`Chamada salva! ${presentCount} alunos presentes de ${students.length}`);\n  };\n\n  const presentCount = Object.values(attendance).filter(Boolean).length;\n  const absentCount = students.length - presentCount;\n\n  return (\n    <DashboardLayout \n      title=\"Painel do Professor\" \n      user=\"Professor João Silva - Matemática\" \n      onLogout={() => navigate('/login')}\n    >\n      <div className=\"flex\">\n        <TeacherSidebar />\n        <main className=\"flex-1 p-6\">\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold text-gray-900\">Chamada - 7º Ano A</h2>\n                <p className=\"text-gray-600\">Registre a presença dos alunos</p>\n              </div>\n              <div className=\"flex space-x-4\">\n                <div className=\"text-center\">\n                  <p className=\"text-2xl font-bold text-green-600\">{presentCount}</p>\n                  <p className=\"text-sm text-gray-600\">Presentes</p>\n                </div>\n                <div className=\"text-center\">\n                  <p className=\"text-2xl font-bold text-red-600\">{absentCount}</p>\n                  <p className=\"text-sm text-gray-600\">Ausentes</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Informações da Aula */}\n          <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Data</label>\n                <input \n                  type=\"date\" \n                  defaultValue=\"2024-01-26\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Horário</label>\n                <input \n                  type=\"time\" \n                  defaultValue=\"14:30\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tópico da Aula</label>\n                <input \n                  type=\"text\" \n                  defaultValue=\"Equações de 2º Grau\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Bimestre</label>\n                <select className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\n                  <option value=\"1\">1º Bimestre</option>\n                  <option value=\"2\">2º Bimestre</option>\n                  <option value=\"3\">3º Bimestre</option>\n                  <option value=\"4\">4º Bimestre</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* Lista de Alunos */}\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Lista de Presença</h3>\n              <div className=\"flex space-x-2\">\n                <button \n                  onClick={() => {\n                    const newAttendance = students.reduce((acc, student) => {\n                      acc[student.id] = true;\n                      return acc;\n                    }, {} as Record<number, boolean>);\n                    setAttendance(newAttendance);\n                  }}\n                  className=\"px-3 py-2 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 text-sm\"\n                >\n                  Marcar Todos\n                </button>\n                <button \n                  onClick={() => {\n                    const newAttendance = students.reduce((acc, student) => {\n                      acc[student.id] = false;\n                      return acc;\n                    }, {} as Record<number, boolean>);\n                    setAttendance(newAttendance);\n                  }}\n                  className=\"px-3 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 text-sm\"\n                >\n                  Desmarcar Todos\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              {students.map((student) => (\n                <div \n                  key={student.id} \n                  className={`flex items-center justify-between p-4 rounded-lg border-2 cursor-pointer transition-colors ${\n                    attendance[student.id] \n                      ? 'border-green-200 bg-green-50' \n                      : 'border-red-200 bg-red-50'\n                  }`}\n                  onClick={() => toggleAttendance(student.id)}\n                >\n                  <div className=\"flex items-center space-x-4\">\n                    <div className={`w-6 h-6 rounded-full flex items-center justify-center ${\n                      attendance[student.id] \n                        ? 'bg-green-500 text-white' \n                        : 'bg-red-500 text-white'\n                    }`}>\n                      {attendance[student.id] ? (\n                        <Check className=\"h-4 w-4\" />\n                      ) : (\n                        <X className=\"h-4 w-4\" />\n                      )}\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{student.name}</p>\n                      <p className=\"text-sm text-gray-600\">Matrícula: {student.registration}</p>\n                    </div>\n                  </div>\n                  <div className={`px-3 py-1 rounded-full text-sm font-medium ${\n                    attendance[student.id] \n                      ? 'bg-green-100 text-green-800' \n                      : 'bg-red-100 text-red-800'\n                  }`}>\n                    {attendance[student.id] ? 'Presente' : 'Ausente'}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"flex justify-end space-x-3 mt-6 pt-6 border-t\">\n              <button className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\">\n                Cancelar\n              </button>\n              <button \n                onClick={handleSaveAttendance}\n                className=\"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n              >\n                <Save className=\"h-4 w-4\" />\n                <span>Salvar Chamada</span>\n              </button>\n            </div>\n          </div>\n        </main>\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport { TeacherAttendancePage, TeacherSidebar };